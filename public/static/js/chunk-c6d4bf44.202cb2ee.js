(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c6d4bf44"],{"2d94":function(e,r,s){"use strict";s("6b92")},4565:function(e,r,s){"use strict";s("6bec")},"6b92":function(e,r,s){},"6bec":function(e,r,s){},d5c2:function(e,r,s){"use strict";s.r(r);var t=function(){var e=this,r=e.$createElement,s=e._self._c||r;return s("div",{staticClass:"register-container"},[s("el-form",{ref:"registerForm",staticClass:"register-form",attrs:{model:e.registerForm,rules:e.registerRules,"auto-complete":"on","label-position":"left"}},[s("div",{staticClass:"title-container"},[s("h3",{staticClass:"title",staticStyle:{"letter-spacing":"15px"}},[e._v("注册界面")])]),s("el-form-item",{attrs:{prop:"userCode"}},[s("span",{staticClass:"svg-container"},[s("svg-icon",{attrs:{"icon-class":"user"}})],1),s("el-input",{ref:"userCode",attrs:{placeholder:"职工号",name:"userCode",type:"text",tabindex:"1","auto-complete":"on"},model:{value:e.registerForm.userCode,callback:function(r){e.$set(e.registerForm,"userCode",r)},expression:"registerForm.userCode"}})],1),s("el-form-item",{attrs:{prop:"username"}},[s("span",{staticClass:"svg-container"},[s("svg-icon",{attrs:{"icon-class":"username"}})],1),s("el-input",{ref:"username",attrs:{placeholder:"姓名",name:"username",type:"text",tabindex:"1","auto-complete":"on"},model:{value:e.registerForm.username,callback:function(r){e.$set(e.registerForm,"username",r)},expression:"registerForm.username"}})],1),s("el-form-item",{attrs:{prop:"password"}},[s("span",{staticClass:"svg-container"},[s("svg-icon",{attrs:{"icon-class":"password"}})],1),s("el-input",{key:e.passwordType,ref:"password",attrs:{placeholder:"密码",name:"password",type:e.passwordType,tabindex:"1","auto-complete":"on"},model:{value:e.registerForm.password,callback:function(r){e.$set(e.registerForm,"password",r)},expression:"registerForm.password"}}),s("span",{staticClass:"show-pwd",on:{click:e.showPwd}},[s("svg-icon",{attrs:{"icon-class":"password"===e.passwordType?"eye":"eye-open"}})],1)],1),s("el-form-item",{attrs:{prop:"checkPassword"}},[s("span",{staticClass:"svg-container"},[s("svg-icon",{attrs:{"icon-class":"password"}})],1),s("el-input",{key:e.passwordType1,ref:"checkPassword1",attrs:{placeholder:"确认密码",name:"checkPassword",type:e.passwordType1,tabindex:"1","auto-complete":"on"},model:{value:e.registerForm.checkPassword,callback:function(r){e.$set(e.registerForm,"checkPassword",r)},expression:"registerForm.checkPassword"}}),s("span",{staticClass:"show-pwd",on:{click:e.showPwd1}},[s("svg-icon",{attrs:{"icon-class":"password"===e.passwordType1?"eye":"eye-open"}})],1)],1),s("el-form-item",{attrs:{prop:"email"}},[s("span",{staticClass:"svg-container"},[s("svg-icon",{attrs:{"icon-class":"email"}})],1),s("el-input",{ref:"email",attrs:{placeholder:"邮箱",name:"email",type:"text",tabindex:"1","auto-complete":"on"},model:{value:e.registerForm.email,callback:function(r){e.$set(e.registerForm,"email",r)},expression:"registerForm.email"}})],1),s("el-form-item",{attrs:{prop:"regcode"}},[s("span",{staticClass:"svg-container"},[s("svg-icon",{attrs:{"icon-class":"regcode"}})],1),s("el-input",{ref:"regcode",attrs:{placeholder:"注册码",name:"regcode",type:"text",tabindex:"1","auto-complete":"off"},model:{value:e.registerForm.regcode,callback:function(r){e.$set(e.registerForm,"regcode",r)},expression:"registerForm.regcode"}})],1),s("el-form-item",{attrs:{prop:"deptName"}},[s("span",{staticClass:"svg-container"},[s("svg-icon",{attrs:{"icon-class":"deptname"}})],1),s("el-select",{attrs:{loading:e.select_loading,placeholder:"请选择部门",width:"20px","remote-method":e.getRemoteDeptList,filterable:"","default-first-option":"",remote:""},model:{value:e.registerForm.deptName,callback:function(r){e.$set(e.registerForm,"deptName",r)},expression:"registerForm.deptName"}},e._l(e.deptListOptions,(function(e,r){return s("el-option",{key:e+r,attrs:{label:e,value:e}})})),1)],1),s("div",{staticClass:"btns"},[s("el-button",{staticStyle:{width:"50%","margin-bottom":"30px"},attrs:{loading:e.loading,type:"primary"},nativeOn:{click:function(r){return r.preventDefault(),e.handleRegister(r)}}},[e._v("注册")]),s("el-button",{staticStyle:{width:"50%","margin-bottom":"30px"},attrs:{loading:e.loading,type:"primary"},on:{click:function(r){return e.resetForm("registerForm")}}},[e._v("重置")])],1)],1)],1)},o=[],a=(s("d81d"),s("b0c0"),s("bc3a")),i=s.n(a),n={name:"Register",data:function(){var e=this,r=function(e,r,s){var t=/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/;if(!r)return s(new Error("邮箱不能为空"));setTimeout((function(){t.test(r)?s():s(new Error("请输入正确的邮箱格式"))}),100)},s=function(r,s,t){""===s?t(new Error("请输入密码")):(""!==e.registerForm.checkPassword&&e.$refs.registerForm.validateField("checkPassword"),t())},t=function(r,s,t){""===s?t(new Error("请再次输入密码")):s!==e.registerForm.password?t(new Error("两次输入密码不一致!")):t()};return{passwordType:"password",passwordType1:"password",loading:!1,redirect:void 0,registerForm:{userCode:"",username:"",password:"",checkPassword:"",email:"",deptName:"",regcode:""},registerRules:{userCode:[{required:!0,message:"请输入职工号",trigger:"blur"}],username:[{required:!0,message:"请输入姓名",trigger:"blur"},{min:2,max:4,message:"长度在2到4个字符",trigger:"blur"}],password:[{validator:s,trigger:"blur"},{min:5,max:10,message:"长度在5到10个字符",trigger:"blur"},{required:!0,message:"请输入密码",trigger:"blur"}],checkPassword:[{required:!0,message:"请再次输入密码",trigger:"blur"},{validator:t,trigger:"blur"},{min:5,max:10,message:"长度在5到10个字符",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{validator:r,trigger:"blur"}],regcode:[{required:!0,message:"请输入注册码",trigger:"blur"}],deptName:[{required:!0,message:"请选择部门",trigger:"change"}]},deptListOptions:[],select_loading:!1}},methods:{showPwd:function(){var e=this;"password"===this.passwordType?this.passwordType="":this.passwordType="password",this.$nextTick((function(){e.$refs.password.focus()}))},showPwd1:function(){var e=this;"password"===this.passwordType1?this.passwordType1="":this.passwordType1="password",this.$nextTick((function(){e.$refs.checkPassword1.focus()}))},getRemoteDeptList:function(e){var r=this,s={keyword:e};this.select_loading=!0,i.a.post("http://localhost:3000/users/searchDept",s).then((function(e){var s=e.data.items;s&&(r.deptListOptions=s.map((function(e){return e.name})))})),this.select_loading=!1},resetForm:function(e){this.$refs[e].resetFields()},handleRegister:function(){var e=this;this.$refs.registerForm.validate((function(r){if(!r)return console.log("error submit!!"),!1;e.$confirm("是否注册?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.loading=!0,i.a.post("http://localhost:3000/users/register",e.registerForm).then((function(r){var s=r.data,t=s.code,o=s.msg;200===t?(e.$router.push({path:e.redirect||"/login"}),e.loading=!1,e.$message.success("用户注册成功,审核完成后即可登录")):(e.$message.error(o),e.loading=!1)})).catch((function(){e.loading=!1}))}))}))}}},c=n,l=(s("4565"),s("2d94"),s("2877")),d=Object(l["a"])(c,t,o,!1,null,"606a6b7e",null);r["default"]=d.exports}}]);